<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Learn Smart! - Year 7 Topics</title>
  <link rel="stylesheet" href="styles.css" />
  <script src="script.js" defer></script>
</head>

<body>
  <!-- Header -->
  <header>
    <div class="container header-content">
      <h1>🌟 Learn Smart!</h1>
      <p>Fun and easy learning for Year 7 students!</p>

      <!-- User Greeting + Logout -->
      <div class="user-area">
        <div id="user-greeting" class="user-greeting"></div>
        <button id="logout-btn" onclick="logout()">Log Out</button>
      </div>

      <!-- Navigation -->
      <nav aria-label="Main navigation">
        <ul>
          <li><a href="#about">About</a></li>
          <li><a href="#topics">Year 7 Topics</a></li>
        </ul>
      </nav>

      <!-- Auth Buttons -->
      <div class="auth-buttons">
        <button type="button" onclick="openSignUp()">Sign Up</button>
        <button type="button" onclick="openLogin()">Log In</button>
      </div>
    </div>
  </header>

  <!-- Main -->
  <main class="container">
    <!-- About Section -->
    <section id="about" class="card">
      <h2>🌟 Welcome to Learn Smart!</h2>
      <p>
        Hey there, future superstar! 🎓 Are you getting ready to start secondary school?  
        You’re in the right place! <strong>Learn Smart</strong> is your fun learning hub designed to help you feel confident and excited for Year 7.
      </p>
      <p>
        Explore quizzes, discover cool facts, and boost your knowledge in subjects like
        <strong>Math</strong>, <strong>Science</strong>, <strong>English</strong>, <strong>History</strong>, and <strong>Geography</strong> — all made easy and enjoyable.
      </p>
      <p>
        Whether you’re studying at school or just curious to learn more, Learn Smart helps
        you stay one step ahead. 🚀 Let’s make learning fun, together!
      </p>
    </section>

    <!-- Year 7 Topics Section -->
    <section id="topics" class="card">
      <h2>📚 Year 7 Topics</h2>
      <div class="subject-buttons">
        <a href="math-year7.html" class="subject-btn">🧮 Mathematics: Algebra & Fractions</a>
        <a href="science-year7.html" class="subject-btn">🔬 Science: Cells & Forces</a>
        <a href="english-year7.html" class="subject-btn">📖 English: Grammar & Comprehension</a>
        <a href="history-year7.html" class="subject-btn">🏺 History: Ancient Civilisations</a>
        <a href="geography-year7.html" class="subject-btn">🌍 Geography: The Earth & Climate</a>
      </div>
    </section>
  </main>

  <!-- Footer -->
  <footer>
    <div class="container">
      <p>© 2025 Learn Smart | Helping Year 7 students shine 🌈</p>
    </div>
  </footer>

  <!-- Sign Up Modal -->
  <div id="signup-modal" class="modal">
    <div class="modal-content">
      <span class="close" onclick="closeModal('signup-modal')">&times;</span>
      <h2>Sign Up 🌟</h2>
      <form id="signup-form">
        <label for="signup-name">Name:</label>
        <input type="text" id="signup-name" required placeholder="Your name" />

        <label for="signup-email">Email:</label>
        <input type="email" id="signup-email" required placeholder="example@email.com" />

        <label for="signup-password">Password:</label>
        <input type="password" id="signup-password" required placeholder="Enter password" />

        <label for="signup-year">Year of School:</label>
        <select id="signup-year" required>
          <option value="">Select your year</option>
          <option value="Year 6">Year 6</option>
          <option value="Year 7">Year 7</option>
          <option value="Year 8">Year 8</option>
        </select>

        <button type="submit">Sign Up</button>
      </form>
    </div>
  </div>

  <!-- Log In Modal -->
  <div id="login-modal" class="modal">
    <div class="modal-content">
      <span class="close" onclick="closeModal('login-modal')">&times;</span>
      <h2>Log In 🔑</h2>
      <form id="login-form">
        <label for="login-name">Name:</label>
        <input type="text" id="login-name" required placeholder="Your name" />

        <label for="login-email">Email:</label>
        <input type="email" id="login-email" required placeholder="example@email.com" />

        <label for="login-password">Password:</label>
        <input type="password" id="login-password" required placeholder="Enter password" />

        <button type="submit">Log In</button>
      </form>
    </div>
  </div>

  <!-- Welcome Quiz Modal -->
  <div id="welcome-quiz-modal" class="modal">
    <div class="modal-content quiz-modal">
      <span class="close" onclick="closeModal('welcome-quiz-modal')">&times;</span>
      <h2>🎉 Welcome to Learn Smart!</h2>
      <p>Let's get to know you a bit! Answer a few quick questions:</p>

      <div id="quiz-questions">
        <!-- Question 1: GCSE knowledge -->
        <div class="quiz-question active" id="gcse-question">
          <p>Do you know what GCSEs are?</p>
          <button onclick="nextQuestionGCSE('Yes')">Yes</button>
          <button onclick="nextQuestionGCSE('No')">No</button>
        </div>

        <!-- Conditional GCSE explanation -->
        <div class="quiz-question" id="gcse-explanation">
          <p>GCSEs (General Certificate of Secondary Education) are exams you take in different subjects at the end of Year 11. They help measure what you’ve learned and prepare you for further study!</p>
          <button onclick="nextAfterGCSE()">Next</button>
        </div>

        <!-- Multiple-choice: Subjects you like -->
        <div class="quiz-question" id="subjects-like">
          <p>Which subjects do you like? (Choose any)</p>
          <div>
            <label><input type="checkbox" value="English"> English</label><br>
            <label><input type="checkbox" value="Maths"> Maths</label><br>
            <label><input type="checkbox" value="Science"> Science</label><br>
            <label><input type="checkbox" value="Geography"> Geography</label><br>
            <label><input type="checkbox" value="History"> History</label><br>
            <label><input type="checkbox" value="Foreign Language"> Foreign Language</label><br>
            <label><input type="checkbox" value="Computing"> Computing</label><br>
          </div>
          <button onclick="nextMultiChoice('Subjects you like')">Next</button>
        </div>

        <!-- Multiple-choice: Subjects you dislike -->
        <div class="quiz-question" id="subjects-dislike">
          <p>Which subjects do you dislike? (Choose any)</p>
          <div>
            <label><input type="checkbox" value="English"> English</label><br>
            <label><input type="checkbox" value="Maths"> Maths</label><br>
            <label><input type="checkbox" value="Science"> Science</label><br>
            <label><input type="checkbox" value="Geography"> Geography</label><br>
            <label><input type="checkbox" value="History"> History</label><br>
            <label><input type="checkbox" value="Foreign Language"> Foreign Language</label><br>
            <label><input type="checkbox" value="Computing"> Computing</label><br>
          </div>
          <button onclick="nextMultiChoice('Subjects you dislike')">Next</button>
        </div>

        <!-- Multiple-choice: Subjects to study more -->
        <div class="quiz-question" id="subjects-more">
          <p>Which subjects do you want to study more next year? (Choose any)</p>
          <div>
            <label><input type="checkbox" value="English"> English</label><br>
            <label><input type="checkbox" value="Maths"> Maths</label><br>
            <label><input type="checkbox" value="Science"> Science</label><br>
            <label><input type="checkbox" value="Geography"> Geography</label><br>
            <label><input type="checkbox" value="History"> History</label><br>
            <label><input type="checkbox" value="Foreign Language"> Foreign Language</label><br>
            <label><input type="checkbox" value="Computing"> Computing</label><br>
          </div>
          <button onclick="nextMultiChoice('Subjects to study more')">Next</button>
        </div>

        <!-- Finish -->
        <div class="quiz-question" id="finish-quiz">
          <p>All done! 🎉 Thank you for sharing your choices.</p>
          <button onclick="closeModal('welcome-quiz-modal')">Finish</button>
        </div>
      </div>
    </div>
  </div>

  <script>
    // === Modal Control ===
    function openSignUp() {
      document.getElementById("signup-modal").style.display = "block";
    }

    function openLogin() {
      document.getElementById("login-modal").style.display = "block";
    }

    function closeModal(id) {
      document.getElementById(id).style.display = "none";
    }

    // === Logout Function ===
    function logout() {
      localStorage.removeItem("loggedInUser");
      location.reload();
    }

    // === Login / Signup Logic ===
    document.addEventListener("DOMContentLoaded", () => {
      const signupForm = document.getElementById("signup-form");
      const loginForm = document.getElementById("login-form");
      const authButtons = document.querySelector(".auth-buttons");
      const greeting = document.getElementById("user-greeting");
      const logoutBtn = document.getElementById("logout-btn");

      function showUserGreeting() {
        const loggedInUser = JSON.parse(localStorage.getItem("loggedInUser"));
        if (loggedInUser && greeting) {
          greeting.innerText = `👋 Hello, ${loggedInUser.name} (${loggedInUser.year})`;
          authButtons.style.display = "none";
          logoutBtn.style.display = "block";
        }
      }

      if (signupForm) {
        signupForm.addEventListener("submit", (e) => {
          e.preventDefault();
          const name = document.getElementById("signup-name").value;
          const year = document.getElementById("signup-year").value;
          const email = document.getElementById("signup-email").value;
          const password = document.getElementById("signup-password").value;

          localStorage.setItem("user", JSON.stringify({ name, year, email, password }));
          alert("✅ Sign-up successful! You can now log in.");
          closeModal("signup-modal");

          // Open welcome quiz
          document.getElementById("welcome-quiz-modal").style.display = "block";
        });
      }

      if (loginForm) {
        loginForm.addEventListener("submit", (e) => {
          e.preventDefault();
          const email = document.getElementById("login-email").value;
          const password = document.getElementById("login-password").value;

          const savedUser = JSON.parse(localStorage.getItem("user"));

          if (savedUser && savedUser.email === email && savedUser.password === password) {
            closeModal("login-modal");
            localStorage.setItem("loggedInUser", JSON.stringify(savedUser));
            showUserGreeting();
          } else {
            alert("❌ Invalid login details.");
          }
        });
      }

      showUserGreeting();
    });

    // === Close modal when clicking outside ===
    window.onclick = function (event) {
      const signup = document.getElementById("signup-modal");
      const login = document.getElementById("login-modal");
      const quiz = document.getElementById("welcome-quiz-modal");
      if (event.target === signup) signup.style.display = "none";
      if (event.target === login) login.style.display = "none";
      if (event.target === quiz) quiz.style.display = "none";
    };

    // === Welcome Quiz Logic ===
    let knowsGCSE = true;
    let quizAnswers = { liked: [], disliked: [], more: [] };

    function nextQuestionGCSE(answer) {
      knowsGCSE = answer === "Yes";
      let savedQuiz = JSON.parse(localStorage.getItem("welcomeQuiz")) || [];
      savedQuiz.push({ question: "Do you know GCSEs?", answer });
      localStorage.setItem("welcomeQuiz", JSON.stringify(savedQuiz));

      document.getElementById("gcse-question").classList.remove("active");
      if (!knowsGCSE) {
        document.getElementById("gcse-explanation").classList.add("active");
      } else {
        document.getElementById("subjects-like").classList.add("active");
      }
    }

    function nextAfterGCSE() {
      document.getElementById("gcse-explanation").classList.remove("active");
      document.getElementById("subjects-like").classList.add("active");
    }

    function nextMultiChoice(type) {
      let container, answers;
      switch(type) {
        case 'Subjects you like':
          container = document.getElementById("subjects-like");
          answers = quizAnswers.liked;
          break;
        case 'Subjects you dislike':
          container = document.getElementById("subjects-dislike");
          answers = quizAnswers.disliked;
          break;
        case 'Subjects to study more':
          container = document.getElementById("subjects-more");
          answers = quizAnswers.more;
          break;
        default:
          return;
      }

      const checkboxes = container.querySelectorAll("input[type=checkbox]");
      checkboxes.forEach(cb => {
        if (cb.checked && !answers.includes(cb.value)) {
          answers.push(cb.value);
        }
      });

      // Save to localStorage
      let savedQuiz = JSON.parse(localStorage.getItem("welcomeQuiz")) || [];
      savedQuiz.push({ question: type, answer: answers });
      localStorage.setItem("welcomeQuiz", JSON.stringify(savedQuiz));

      container.classList.remove("active");

      // Move to next section
      if (type === "Subjects you like") {
        document.getElementById("subjects-dislike").classList.add("active");
      } else if (type === "Subjects you dislike") {
        document.getElementById("subjects-more").classList.add("active");
      } else if (type === "Subjects to study more") {
        document.getElementById("finish-quiz").classList.add("active");
      }
    }
  </script>
</body>
</html>
